package de.daniel.marlinghaus.vidr.task;

import org.gradle.api.DefaultTask;
import org.gradle.api.provider.Property;
import org.gradle.api.tasks.Input;
import org.gradle.api.tasks.TaskAction;

import java.net.URI;

public abstract class CreateVulnerabilityReport extends DefaultTask {

    /**
     *
     * @return Property<URI> configured URL for vulnerarbility service
     */
    @Input
    public abstract Property<URI> getServiceUrl(); // abstract getter of type Property<T>

    @TaskAction
    void run() {
        URI uri = getServiceUrl().getOrElse(URI.create("localhost:4954"))
            .resolve("get/report");
        System.out.println("Downloading " + uri); // Use the `uri` property
    }
}
